From bac0a4425ed0ee2e95ecb92d86b3056bfc550394 Mon Sep 17 00:00:00 2001
From: "lauren n. liberda" <lauren@selfisekai.rocks>
Date: Thu, 27 Jun 2024 03:56:19 +0200
Subject: [PATCH] stdc++: replace std::make_optional with assignment in
 history_item.cc

workarounds https://gcc.gnu.org/bugzilla/show_bug.cgi?id=101227

Bug: 41455655
Change-Id: Ib6ed1cd7035f264d838eb401240f59cbd5110cf8
---
 third_party/blink/renderer/core/loader/history_item.cc | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

diff --git a/third_party/blink/renderer/core/loader/history_item.cc b/third_party/blink/renderer/core/loader/history_item.cc
index 6442868bb5354..36635d3c7ae3f 100644
--- a/third_party/blink/renderer/core/loader/history_item.cc
+++ b/third_party/blink/renderer/core/loader/history_item.cc
@@ -182,26 +182,26 @@ void HistoryItem::SetReferrerPolicy(network::mojom::ReferrerPolicy policy) {
 
 void HistoryItem::SetVisualViewportScrollOffset(const ScrollOffset& offset) {
   if (!view_state_)
-    view_state_ = std::make_optional<ViewState>();
+    view_state_ = ViewState();
   view_state_->visual_viewport_scroll_offset_ = offset;
 }
 
 void HistoryItem::SetScrollOffset(const ScrollOffset& offset) {
   if (!view_state_)
-    view_state_ = std::make_optional<ViewState>();
+    view_state_ = ViewState();
   view_state_->scroll_offset_ = offset;
 }
 
 void HistoryItem::SetPageScaleFactor(float scale_factor) {
   if (!view_state_)
-    view_state_ = std::make_optional<ViewState>();
+    view_state_ = ViewState();
   view_state_->page_scale_factor_ = scale_factor;
 }
 
 void HistoryItem::SetScrollAnchorData(
     const ScrollAnchorData& scroll_anchor_data) {
   if (!view_state_)
-    view_state_ = std::make_optional<ViewState>();
+    view_state_ = ViewState();
   view_state_->scroll_anchor_data_ = scroll_anchor_data;
 }
 
